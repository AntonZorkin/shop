{"version":3,"file":"helpers-BPeorTST.js","sources":["../../src/js/refs.js","../../src/js/constants.js","../../src/js/render-function.js","../../src/js/modal.js","../../src/js/handlers.js","../../src/js/products-api.js","../../src/js/helpers.js"],"sourcesContent":["export const refs = {\n  categoriesElem: document.querySelector('.categories'),\n  productsElem: document.querySelector('.products'),\n  categoryElem: document.querySelector('.categories__item'),\n  loadMoreElem: document.querySelector('.load-more-btn'),\n  searchBtnElem: document.querySelector('.search-form'),\n  modalElem: document.querySelector('.modal-product'),\n  modalRoot: document.querySelector('.modal'),\n  modalCloseElem: document.querySelector('.modal__close-btn'),\n  formElem: document.querySelector('.search-form'),\n  inputElem: document.querySelector('.search-form__input'),\n  productIdElem: document.querySelector('.js-product-id'),\n  themeElem: document.querySelector('.theme-toggle-btn'),\n  cartNumElem: document.querySelector('.js-cart-count'),\n  wishNumElem: document.querySelector('.js-wish-count'),\n  cartProducts: document.querySelector('.js-cart-products'),\n  wishProducts: document.querySelector('.js-wish-products'),\n};\n","export const BASE_URL = 'https://dummyjson.com/';\nexport const ENDPOINT = {\n  CATEGORIES: 'products/category-list',\n  PRODUCTS: `products?`,\n  CATEGORY: 'products/category/',\n  ID: 'products/',\n  NAME: 'products/search?q=',\n};\nexport const LIMIT = 12;\n","import { refs } from './refs';\n\nexport const createCategories = data =>\n  data\n    .map(\n      item => `<li class=\"categories__item\">\n   <button class=\"categories__btn\" type=\"button\">${item}</button>\n </li>`\n    )\n    .join('');\n\nexport const createProducts = data =>\n  data\n    .map(\n      item => `\n  <li class=\"products__item\" data-id=\"${item.id}\">\n    <img class=\"products__image\" src=\"${item.thumbnail}\" alt=\"${item.description}\"/>\n    <p class=\"products__title\">${item.title}</p>\n    <p class=\"products__brand\"><span class=\"products__brand--bold\">Brand:${item.brand}</span></p>\n    <p class=\"products__category\">Category: ${item.category}</p>\n    <p class=\"products__price\">Price: ${item.price}$</p>\n  </li>`\n    )\n    .join('');\n\nexport const createModal = data =>\n  `<img class=\"modal-product__img\" src=\"${\n    data.images?.[0] ?? data.thumbnail\n  }\" alt=\"${data.title || 'Product image'}\" />\n      <div class=\"modal-product__content\">\n        <p class=\"modal-product__title\">${data.title}</p>\n        <ul class=\"modal-product__tags\">${data.tags}</ul>\n        <p class=\"modal-product__description\">${data.description}</p>\n        <p class=\"invisible js-product-id\">${data.id}</p>\n        <p class=\"modal-product__shipping-information\">Shipping: ${\n          data.shippingInformation\n        }</p>\n        <p class=\"modal-product__return-policy\">Return Policy: ${\n          data.returnPolicy\n        }</p>\n        <p class=\"modal-product__price\">Price: ${data.price}$</p>\n        <button class=\"modal-product__buy-btn js-buy-btn\" type=\"button\">Buy</button>\n      </div>`;\n","import { refs } from './refs';\nimport { checkLS } from './helpers';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nrefs.modalElem.addEventListener('click', e => {\n  const buyBtn = e.target.closest('.js-buy-btn');\n  if (!buyBtn) return;\n\n  onBuyBtnClick();\n});\n\nexport function openModal() {\n  refs.modalRoot.classList.add('modal--is-open');\n  document.addEventListener('keydown', onEscKeyDown);\n  refs.modalRoot.addEventListener('click', onOutOfModalClick);\n}\n\nexport const closeModal = () => {\n  refs.modalRoot.classList.remove('modal--is-open');\n  document.removeEventListener('keydown', onEscKeyDown);\n  refs.modalRoot.removeEventListener('click', onOutOfModalClick);\n  delete refs.modalRoot.dataset.id;\n};\n\nexport const onEscKeyDown = e => {\n  if (\n    refs.modalRoot.classList.contains('modal--is-open') &&\n    e.key === 'Escape'\n  ) {\n    closeModal();\n  }\n};\n\nexport const onOutOfModalClick = e => {\n  if (e.target !== e.currentTarget) {\n    return;\n  }\n  closeModal();\n};\n\nexport const onBuyBtnClick = () => {\n  const productId = refs.modalRoot.dataset.id;\n  if (!productId) return;\n  let cart = checkLS('cart');\n  if (cart.includes(productId)) {\n    const index = cart.indexOf(productId);\n    cart.splice(index, 1);\n    localStorage.setItem('cart', JSON.stringify(cart));\n    localStorage.setItem('cartCount', String(cart.length));\n  }\n\n  let wish = checkLS('wishlist');\n  if (wish.includes(productId)) {\n    const index = wish.indexOf(productId);\n    wish.splice(index, 1);\n    localStorage.setItem('wishlist', JSON.stringify(wish));\n    localStorage.setItem('wishlistCount', String(wish.length));\n  }\n  iziToast.success({\n    message: 'Product added to your order.',\n    timeout: 3000,\n    position: 'topCenter',\n  });\n  closeModal();\n};\n","import iziToast from 'izitoast';\nimport {\n  createCategories,\n  createProducts,\n  createModal,\n} from './render-function';\nimport {\n  getCategories,\n  getProductsByCategory,\n  getProducts,\n  getProductById,\n  getProductByName,\n} from './products-api';\nimport { activeFirstBtn, activeBtn, categoryName, checkLS } from './helpers';\nimport { openModal } from './modal';\nimport { refs } from './refs';\n\nexport let currentPage = 1;\nexport const init = async () => {\n  //* перевірка localStorage на наявність у кошику та у wishlist товарів===========\n  let savedCart = localStorage.getItem('cart');\n  if (savedCart === null || savedCart === '') {\n    localStorage.setItem('cart', '[]');\n    localStorage.setItem('cartCount', '0');\n    refs.cartNumElem.textContent = 0;\n  } else {\n    localStorage.setItem(\n      'cartCount',\n      JSON.parse(localStorage.getItem('cart')).length\n    );\n    refs.cartNumElem.textContent = localStorage.getItem('cartCount');\n  }\n\n  let savedWish = localStorage.getItem('wishlist');\n  if (savedWish === null || savedWish === '') {\n    localStorage.setItem('wishlist', '[]');\n    localStorage.setItem('wishlistCount', '0');\n    refs.wishNumElem.textContent = 0;\n  } else {\n    localStorage.setItem(\n      'wishlistCount',\n      JSON.parse(localStorage.getItem('wishlist')).length\n    );\n    refs.wishNumElem.textContent = localStorage.getItem('wishlistCount');\n  }\n\n  //*===========================================\n\n  let savedTheme = localStorage.getItem('theme');\n  if (!savedTheme) {\n    localStorage.setItem('theme', 'light');\n    savedTheme = 'light';\n  }\n  if (savedTheme === 'dark') {\n    document.body.setAttribute('data-theme', 'dark');\n  } else {\n    document.body.removeAttribute('data-theme');\n  }\n\n  const data = await getCategories();\n  const categoriesMarkup = createCategories(['All', ...data]);\n  refs.categoriesElem.innerHTML = categoriesMarkup;\n  activeFirstBtn();\n  const products = await getProducts();\n  const productsMarkup = createProducts(products);\n  refs.productsElem.innerHTML = productsMarkup;\n};\n\nexport const onCategoreClick = async e => {\n  activeBtn(e);\n  currentPage = 1;\n  try {\n    const products =\n      categoryName === 'All'\n        ? await getProducts()\n        : await getProductsByCategory();\n\n    refs.productsElem.innerHTML = createProducts(products);\n  } catch (error) {\n    throw error;\n  }\n};\n\nexport const onLoadMoreClick = async e => {\n  currentPage += 1;\n  try {\n    let products;\n    if (categoryName && categoryName !== 'All') {\n      products = await getProductsByCategory();\n    } else {\n      products = await getProducts();\n    }\n    const productsMarkup = createProducts(products);\n    refs.productsElem.insertAdjacentHTML('beforeend', productsMarkup);\n  } catch (error) {\n    throw error;\n  }\n};\n\nlet currentProductId;\nexport const onProductsClick = async e => {\n  const li = e.target.closest('.products__item');\n  if (!li) return;\n  try {\n    const productId = Number(li.dataset.id);\n    const data = await getProductById(productId);\n    refs.modalElem.innerHTML = createModal(data);\n    refs.modalRoot.dataset.id = String(data.id);\n    openModal();\n    const cartBtnElem = refs.modalRoot.querySelector('.js-cart-btn');\n\n    currentProductId = String(data.id);\n\n    let storageProductId = checkLS('cart');\n\n    if (storageProductId.includes(currentProductId)) {\n      cartBtnElem.textContent = 'Remove from cart';\n      cartBtnElem.classList.add('in-cart');\n      cartBtnElem.addEventListener('click', onRemoveFromCartClick);\n    } else {\n      cartBtnElem.textContent = 'Add to cart';\n      cartBtnElem.addEventListener('click', onCartBtnClick);\n    }\n\n    //*======================================================\n    const wishBtnElem = refs.modalRoot.querySelector('.js-wish-btn');\n\n    let storageWishProductId = checkLS('wishlist');\n\n    if (storageWishProductId.includes(currentProductId)) {\n      wishBtnElem.textContent = 'Remove from Wishlist';\n      wishBtnElem.classList.add('in-wish');\n      wishBtnElem.addEventListener('click', onRemoveFromWishClick);\n    } else {\n      wishBtnElem.textContent = 'Add to Wishlist';\n      wishBtnElem.addEventListener('click', onWishBtnClick);\n    }\n  } catch (error) {\n    throw error;\n  }\n};\n\nexport const onCartBtnClick = e => {\n  const targetBtn = e.currentTarget;\n  let storageProductId = checkLS('cart');\n  if (!storageProductId.includes(currentProductId)) {\n    storageProductId.push(currentProductId);\n    targetBtn.textContent = 'Remove from cart';\n    targetBtn.classList.add('in-cart');\n    targetBtn.removeEventListener('click', onCartBtnClick);\n    targetBtn.addEventListener('click', onRemoveFromCartClick);\n  }\n  localStorage.setItem('cart', JSON.stringify(storageProductId));\n  refs.cartNumElem.textContent = storageProductId.length;\n  localStorage.setItem('cartCount', String(storageProductId.length));\n};\n\n//*======================================================\nexport const onWishBtnClick = e => {\n  const targetBtn = e.currentTarget;\n  let storageWishProductId = checkLS('wishlist');\n  if (!storageWishProductId.includes(currentProductId)) {\n    storageWishProductId.push(currentProductId);\n    targetBtn.textContent = 'Remove from Wishlist';\n    targetBtn.classList.add('in-wishlist');\n    targetBtn.removeEventListener('click', onWishBtnClick);\n    targetBtn.addEventListener('click', onRemoveFromWishClick);\n  }\n  refs.wishNumElem.textContent = storageWishProductId.length;\n  localStorage.setItem('wishlist', JSON.stringify(storageWishProductId));\n  localStorage.setItem('wishlistCount', String(storageWishProductId.length));\n};\n//*======================================================\n\nexport const onRemoveFromCartClick = e => {\n  const targetBtn = e.currentTarget;\n  let storageProductId = checkLS('cart');\n  if (storageProductId.includes(currentProductId)) {\n    const idIndex = storageProductId.indexOf(currentProductId);\n    storageProductId.splice(idIndex, 1);\n    targetBtn.textContent = 'Add to cart';\n    targetBtn.classList.remove('in-cart');\n    targetBtn.removeEventListener('click', onRemoveFromCartClick);\n    targetBtn.addEventListener('click', onCartBtnClick);\n  }\n  localStorage.setItem('cart', JSON.stringify(storageProductId));\n  refs.cartNumElem.textContent = storageProductId.length;\n  localStorage.setItem('cartCount', String(storageProductId.length));\n};\n//*======================================================\nexport const onRemoveFromWishClick = e => {\n  const targetBtn = e.currentTarget;\n  let storageWishProductId = checkLS('wishlist');\n  if (storageWishProductId.includes(currentProductId)) {\n    const idIndex = storageWishProductId.indexOf(currentProductId);\n    storageWishProductId.splice(idIndex, 1);\n    targetBtn.textContent = 'Add to Wishlist';\n    targetBtn.classList.remove('in-wishlist');\n    targetBtn.removeEventListener('click', onRemoveFromWishClick);\n    targetBtn.addEventListener('click', onWishBtnClick);\n  }\n  localStorage.setItem('wishlist', JSON.stringify(storageWishProductId));\n  refs.wishNumElem.textContent = storageWishProductId.length;\n  localStorage.setItem('wishlistCount', String(storageWishProductId.length));\n};\n//*======================================================\n\nexport let productName;\nexport const onFormSubmit = async e => {\n  e.preventDefault();\n  productName = refs.inputElem.value.trim();\n  const products = await getProductByName(productName);\n  if (products.length === 0) {\n    iziToast.info({\n      message: 'No more products available.',\n      timeout: 3000,\n      position: 'topCenter',\n      color: 'yellow',\n    });\n  }\n  const productsByNameMarkup = createProducts(products);\n  refs.productsElem.innerHTML = productsByNameMarkup;\n};\n\nexport const onThemeBtn = e => {\n  const savedTheme = localStorage.getItem('theme');\n\n  if (!savedTheme) {\n    localStorage.setItem('theme', 'light');\n  }\n  if (savedTheme === 'light') {\n    document.body.setAttribute('data-theme', 'dark');\n    localStorage.setItem('theme', 'dark');\n  } else {\n    document.body.removeAttribute('data-theme');\n    localStorage.setItem('theme', 'light');\n  }\n};\n\nexport const onCart = async () => {\n  let savedCart = checkLS('cart');\n  if (!Array.isArray(savedCart)) savedCart = [];\n  if (savedCart.length === 0) {\n    iziToast.info({\n      message: 'Cart is empty',\n      timeout: 3000,\n      position: 'topCenter',\n      color: 'yellow',\n    });\n    return;\n  }\n  savedCart = savedCart.map(id => Number(id)).filter(n => Number.isFinite(n));\n  let cartProducts = [];\n  for (let i = 0; i < savedCart.length; i++) {\n    cartProducts.push(getProductById(savedCart[i]));\n  }\n  cartProducts = await Promise.allSettled(cartProducts);\n  const existingProducts = [];\n  for (let i = 0; i < cartProducts.length; i++) {\n    const res = cartProducts[i];\n    if (res.status === 'fulfilled') {\n      existingProducts.push(res.value);\n    } else {\n      iziToast.warning({\n        message: 'Failed to load product',\n        timeout: 3000,\n        position: 'topCenter',\n        color: 'red',\n      });\n    }\n  }\n  if (existingProducts.length === 0) {\n    iziToast.info({\n      message: 'Cart is empty',\n      timeout: 3000,\n      position: 'topCenter',\n      color: 'yellow',\n    });\n    return;\n  }\n  const cartMarkup = createProducts(existingProducts);\n  refs.cartProducts.innerHTML = cartMarkup;\n};\n\nexport const onWish = async () => {\n  let savedWish = checkLS('wishlist');\n  if (!Array.isArray(savedWish)) savedWish = [];\n  if (savedWish.length === 0) {\n    iziToast.info({\n      message: '«Wishlist is empty',\n      timeout: 3000,\n      position: 'topCenter',\n      color: 'yellow',\n    });\n    return;\n  }\n  //???========================================\n  savedWish = savedWish.map(id => Number(id)).filter(n => Number.isFinite(n));\n  let wishProducts = [];\n  for (let i = 0; i < savedWish.length; i++) {\n    wishProducts.push(getProductById(savedWish[i]));\n  }\n  wishProducts = await Promise.allSettled(wishProducts);\n  const existingProducts = [];\n  for (let i = 0; i < wishProducts.length; i++) {\n    const res = wishProducts[i];\n    if (res.status === 'fulfilled') {\n      existingProducts.push(res.value);\n    } else {\n      iziToast.warning({\n        message: 'Failed to load product',\n        timeout: 3000,\n        position: 'topCenter',\n        color: 'red',\n      });\n    }\n  }\n  if (existingProducts.length === 0) {\n    iziToast.info({\n      message: '«Wishlist is empty',\n      timeout: 3000,\n      position: 'topCenter',\n      color: 'yellow',\n    });\n    return;\n  }\n  const cartMarkup = createProducts(existingProducts);\n  refs.wishProducts.innerHTML = cartMarkup;\n};\n","import axios from 'axios';\nimport { BASE_URL, ENDPOINT, LIMIT } from './constants';\nimport { categoryName, activateLoadMore } from './helpers';\n\nimport { currentPage } from './handlers';\n\naxios.defaults.baseURL = BASE_URL;\n\nexport async function getCategories() {\n  try {\n    const response = await axios.get(`${ENDPOINT.CATEGORIES}`);\n    const data = response.data;\n    return data;\n  } catch (error) {\n    throw error;\n  }\n}\n\nexport let totalPages;\n\nexport async function getProductsByCategory() {\n  let params = new URLSearchParams({\n    limit: LIMIT,\n    skip: (currentPage - 1) * LIMIT,\n  });\n  try {\n    const response = await axios.get(`${ENDPOINT.CATEGORY}${categoryName}`, {\n      params,\n    });\n    const data = response.data;\n    totalPages = Math.ceil(data.total / LIMIT);\n    activateLoadMore();\n    return data.products;\n  } catch (error) {\n    throw error;\n  }\n}\n\nexport async function getProducts() {\n  let params = new URLSearchParams({\n    limit: LIMIT,\n    skip: (currentPage - 1) * LIMIT,\n  });\n  try {\n    const response = await axios.get(`${ENDPOINT.PRODUCTS}`, { params });\n    const data = response.data;\n    totalPages = Math.ceil(data.total / LIMIT);\n    activateLoadMore();\n    return data.products;\n  } catch (error) {\n    throw error;\n  }\n}\n\nexport const getProductById = async productId => {\n  try {\n    const response = await axios.get(`${ENDPOINT.ID}${productId}`);\n    const data = response.data;\n    return data;\n  } catch (error) {\n    throw error;\n  }\n};\n\nexport const getProductByName = async productName => {\n  let params = new URLSearchParams({\n    limit: LIMIT,\n    skip: (currentPage - 1) * LIMIT,\n  });\n  try {\n    const response = await axios.get(`${ENDPOINT.NAME}${productName}`, {\n      params,\n    });\n    const data = response.data;\n    totalPages = Math.ceil(data.total / LIMIT);\n    activateLoadMore();\n    return data.products;\n  } catch (error) {\n    throw error;\n  }\n};\n","import { refs } from './refs';\nimport { totalPages } from './products-api';\nimport { currentPage } from './handlers';\nimport iziToast from 'izitoast';\n\nexport let categoryName = 'All';\nexport const activeFirstBtn = () => {\n  const firstBtn = document.querySelector('.categories__btn');\n  if (firstBtn) {\n    firstBtn.classList.add('categories__btn--active');\n    categoryName = firstBtn.textContent;\n  }\n};\n\nexport const activeBtn = e => {\n  const targetBtn = e.target.closest('.categories__btn');\n  if (!targetBtn) return;\n\n  const previousActiveBtn = document.querySelector('.categories__btn--active');\n  if (previousActiveBtn) {\n    previousActiveBtn.classList.remove('categories__btn--active');\n  }\n  targetBtn.classList.add('categories__btn--active');\n  categoryName = targetBtn.textContent;\n  return;\n};\n\nexport const activateLoadMore = () => {\n  if (totalPages > currentPage) {\n    refs.loadMoreElem.classList.remove('is-hidden');\n  } else {\n    refs.loadMoreElem.classList.add('is-hidden');\n    iziToast.info({\n      message: 'No more products available.',\n      timeout: 3000,\n      position: 'topCenter',\n      color: 'yellow',\n    });\n  }\n};\n\nexport const checkLS = key => {\n  let value = localStorage.getItem(key);\n  if (value === null || value === '') {\n    localStorage.setItem(key, '[]');\n    return [];\n  } else {\n    try {\n      value = JSON.parse(localStorage.getItem(key));\n      if (Array.isArray(value)) {\n        return value;\n      } else {\n        return [];\n      }\n    } catch (error) {\n      localStorage.setItem(key, '[]');\n      return [];\n    }\n  }\n};\n\nexport const addToCartById = id => {\n  const cart = checkLS('cart');\n  if (!cart.includes(String(id))) {\n    cart.push(String(id));\n    localStorage.setItem('cart', JSON.stringify(cart));\n  }\n};\n\nexport const removeFromWishlistById = id => {\n  const wishlist = checkLS('wishlist');\n  const updated = wishlist.filter(itemId => String(itemId) !== String(id));\n  localStorage.setItem('wishlist', JSON.stringify(updated));\n};\n"],"names":["refs","BASE_URL","ENDPOINT","LIMIT","createCategories","data","item","createProducts","createModal","_a","onBuyBtnClick","openModal","onEscKeyDown","onOutOfModalClick","closeModal","productId","cart","checkLS","index","wish","iziToast","currentPage","init","savedCart","savedWish","savedTheme","getCategories","categoriesMarkup","activeFirstBtn","products","getProducts","productsMarkup","onCategoreClick","activeBtn","categoryName","getProductsByCategory","error","onLoadMoreClick","currentProductId","onProductsClick","li","getProductById","cartBtnElem","onRemoveFromCartClick","onCartBtnClick","wishBtnElem","onRemoveFromWishClick","onWishBtnClick","targetBtn","storageProductId","storageWishProductId","idIndex","productName","onFormSubmit","getProductByName","productsByNameMarkup","onThemeBtn","onCart","id","n","cartProducts","i","existingProducts","res","cartMarkup","onWish","wishProducts","axios","totalPages","params","activateLoadMore","firstBtn","previousActiveBtn","key","value","addToCartById","removeFromWishlistById","updated","itemId"],"mappings":"svBAAY,MAACA,EAAO,CAClB,eAAgB,SAAS,cAAc,aAAa,EACpD,aAAc,SAAS,cAAc,WAAW,EAChD,aAAc,SAAS,cAAc,mBAAmB,EACxD,aAAc,SAAS,cAAc,gBAAgB,EACrD,cAAe,SAAS,cAAc,cAAc,EACpD,UAAW,SAAS,cAAc,gBAAgB,EAClD,UAAW,SAAS,cAAc,QAAQ,EAC1C,eAAgB,SAAS,cAAc,mBAAmB,EAC1D,SAAU,SAAS,cAAc,cAAc,EAC/C,UAAW,SAAS,cAAc,qBAAqB,EACvD,cAAe,SAAS,cAAc,gBAAgB,EACtD,UAAW,SAAS,cAAc,mBAAmB,EACrD,YAAa,SAAS,cAAc,gBAAgB,EACpD,YAAa,SAAS,cAAc,gBAAgB,EACpD,aAAc,SAAS,cAAc,mBAAmB,EACxD,aAAc,SAAS,cAAc,mBAAmB,CAC1D,ECjBaC,EAAW,yBACXC,EAAW,CACtB,WAAY,yBACZ,SAAU,YACV,SAAU,qBACV,GAAI,YACJ,KAAM,oBACR,EACaC,EAAQ,GCNRC,EAAmBC,GAC9BA,EACG,IACCC,GAAQ;AAAA,mDACqCA,CAAI;AAAA,OAElD,EACA,KAAK,EAAE,EAECC,EAAiBF,GAC5BA,EACG,IACCC,GAAQ;AAAA,wCAC0BA,EAAK,EAAE;AAAA,wCACPA,EAAK,SAAS,UAAUA,EAAK,WAAW;AAAA,iCAC/CA,EAAK,KAAK;AAAA,2EACgCA,EAAK,KAAK;AAAA,8CACvCA,EAAK,QAAQ;AAAA,wCACnBA,EAAK,KAAK;AAAA,QAE7C,EACA,KAAK,EAAE,EAECE,EAAcH,GAAI,OAC7B,gDACEI,EAAAJ,EAAK,SAAL,YAAAI,EAAc,KAAMJ,EAAK,SAC7B,UAAYA,EAAK,OAAS,eAAe;AAAA;AAAA,0CAECA,EAAK,KAAK;AAAA,0CACVA,EAAK,IAAI;AAAA,gDACHA,EAAK,WAAW;AAAA,6CACnBA,EAAK,EAAE;AAAA,mEAE1CA,EAAK,mBACN;AAAA,iEAECA,EAAK,YACN;AAAA,iDACwCA,EAAK,KAAK;AAAA;AAAA,eCnC3DL,EAAK,UAAU,iBAAiB,QAAS,GAAK,CAC7B,EAAE,OAAO,QAAQ,aAAa,GAG7CU,GACF,CAAC,EAEM,SAASC,GAAY,CAC1BX,EAAK,UAAU,UAAU,IAAI,gBAAgB,EAC7C,SAAS,iBAAiB,UAAWY,CAAY,EACjDZ,EAAK,UAAU,iBAAiB,QAASa,CAAiB,CAC5D,CAEY,MAACC,EAAa,IAAM,CAC9Bd,EAAK,UAAU,UAAU,OAAO,gBAAgB,EAChD,SAAS,oBAAoB,UAAWY,CAAY,EACpDZ,EAAK,UAAU,oBAAoB,QAASa,CAAiB,EAC7D,OAAOb,EAAK,UAAU,QAAQ,EAChC,EAEaY,EAAe,GAAK,CAE7BZ,EAAK,UAAU,UAAU,SAAS,gBAAgB,GAClD,EAAE,MAAQ,UAEVc,GAEJ,EAEaD,EAAoB,GAAK,CAChC,EAAE,SAAW,EAAE,eAGnBC,GACF,EAEaJ,EAAgB,IAAM,CACjC,MAAMK,EAAYf,EAAK,UAAU,QAAQ,GACzC,GAAI,CAACe,EAAW,OAChB,IAAIC,EAAOC,EAAQ,MAAM,EACzB,GAAID,EAAK,SAASD,CAAS,EAAG,CAC5B,MAAMG,EAAQF,EAAK,QAAQD,CAAS,EACpCC,EAAK,OAAOE,EAAO,CAAC,EACpB,aAAa,QAAQ,OAAQ,KAAK,UAAUF,CAAI,CAAC,EACjD,aAAa,QAAQ,YAAa,OAAOA,EAAK,MAAM,CAAC,CACtD,CAED,IAAIG,EAAOF,EAAQ,UAAU,EAC7B,GAAIE,EAAK,SAASJ,CAAS,EAAG,CAC5B,MAAMG,EAAQC,EAAK,QAAQJ,CAAS,EACpCI,EAAK,OAAOD,EAAO,CAAC,EACpB,aAAa,QAAQ,WAAY,KAAK,UAAUC,CAAI,CAAC,EACrD,aAAa,QAAQ,gBAAiB,OAAOA,EAAK,MAAM,CAAC,CAC1D,CACDC,EAAS,QAAQ,CACf,QAAS,+BACT,QAAS,IACT,SAAU,WACd,CAAG,EACDN,GACF,EChDO,IAAIO,EAAc,EACb,MAACC,EAAO,SAAY,CAE9B,IAAIC,EAAY,aAAa,QAAQ,MAAM,EACvCA,IAAc,MAAQA,IAAc,IACtC,aAAa,QAAQ,OAAQ,IAAI,EACjC,aAAa,QAAQ,YAAa,GAAG,EACrCvB,EAAK,YAAY,YAAc,IAE/B,aAAa,QACX,YACA,KAAK,MAAM,aAAa,QAAQ,MAAM,CAAC,EAAE,MAC/C,EACIA,EAAK,YAAY,YAAc,aAAa,QAAQ,WAAW,GAGjE,IAAIwB,EAAY,aAAa,QAAQ,UAAU,EAC3CA,IAAc,MAAQA,IAAc,IACtC,aAAa,QAAQ,WAAY,IAAI,EACrC,aAAa,QAAQ,gBAAiB,GAAG,EACzCxB,EAAK,YAAY,YAAc,IAE/B,aAAa,QACX,gBACA,KAAK,MAAM,aAAa,QAAQ,UAAU,CAAC,EAAE,MACnD,EACIA,EAAK,YAAY,YAAc,aAAa,QAAQ,eAAe,GAKrE,IAAIyB,EAAa,aAAa,QAAQ,OAAO,EACxCA,IACH,aAAa,QAAQ,QAAS,OAAO,EACrCA,EAAa,SAEXA,IAAe,OACjB,SAAS,KAAK,aAAa,aAAc,MAAM,EAE/C,SAAS,KAAK,gBAAgB,YAAY,EAG5C,MAAMpB,EAAO,MAAMqB,IACbC,EAAmBvB,EAAiB,CAAC,MAAO,GAAGC,CAAI,CAAC,EAC1DL,EAAK,eAAe,UAAY2B,EAChCC,IACA,MAAMC,EAAW,MAAMC,IACjBC,EAAiBxB,EAAesB,CAAQ,EAC9C7B,EAAK,aAAa,UAAY+B,CAChC,EAEaC,EAAkB,MAAM,GAAK,CACxCC,EAAU,CAAC,EACXZ,EAAc,EACd,GAAI,CACF,MAAMQ,EACJK,IAAiB,MACb,MAAMJ,EAAa,EACnB,MAAMK,EAAqB,EAEjCnC,EAAK,aAAa,UAAYO,EAAesB,CAAQ,CACtD,OAAQO,EAAO,CACd,MAAMA,CACP,CACH,EAEaC,EAAkB,MAAM,GAAK,CACxChB,GAAe,EACf,GAAI,CACF,IAAIQ,EACAK,GAAgBA,IAAiB,MACnCL,EAAW,MAAMM,IAEjBN,EAAW,MAAMC,IAEnB,MAAMC,EAAiBxB,EAAesB,CAAQ,EAC9C7B,EAAK,aAAa,mBAAmB,YAAa+B,CAAc,CACjE,OAAQK,EAAO,CACd,MAAMA,CACP,CACH,EAEA,IAAIE,EACQ,MAACC,EAAkB,MAAM,GAAK,CACxC,MAAMC,EAAK,EAAE,OAAO,QAAQ,iBAAiB,EAC7C,GAAKA,EACL,GAAI,CACF,MAAMzB,EAAY,OAAOyB,EAAG,QAAQ,EAAE,EAChCnC,EAAO,MAAMoC,EAAe1B,CAAS,EAC3Cf,EAAK,UAAU,UAAYQ,EAAYH,CAAI,EAC3CL,EAAK,UAAU,QAAQ,GAAK,OAAOK,EAAK,EAAE,EAC1CM,IACA,MAAM+B,EAAc1C,EAAK,UAAU,cAAc,cAAc,EAE/DsC,EAAmB,OAAOjC,EAAK,EAAE,EAEVY,EAAQ,MAAM,EAEhB,SAASqB,CAAgB,GAC5CI,EAAY,YAAc,mBAC1BA,EAAY,UAAU,IAAI,SAAS,EACnCA,EAAY,iBAAiB,QAASC,CAAqB,IAE3DD,EAAY,YAAc,cAC1BA,EAAY,iBAAiB,QAASE,CAAc,GAItD,MAAMC,EAAc7C,EAAK,UAAU,cAAc,cAAc,EAEpCiB,EAAQ,UAAU,EAEpB,SAASqB,CAAgB,GAChDO,EAAY,YAAc,uBAC1BA,EAAY,UAAU,IAAI,SAAS,EACnCA,EAAY,iBAAiB,QAASC,CAAqB,IAE3DD,EAAY,YAAc,kBAC1BA,EAAY,iBAAiB,QAASE,CAAc,EAEvD,OAAQX,EAAO,CACd,MAAMA,CACP,CACH,EAEaQ,EAAiB,GAAK,CACjC,MAAMI,EAAY,EAAE,cACpB,IAAIC,EAAmBhC,EAAQ,MAAM,EAChCgC,EAAiB,SAASX,CAAgB,IAC7CW,EAAiB,KAAKX,CAAgB,EACtCU,EAAU,YAAc,mBACxBA,EAAU,UAAU,IAAI,SAAS,EACjCA,EAAU,oBAAoB,QAASJ,CAAc,EACrDI,EAAU,iBAAiB,QAASL,CAAqB,GAE3D,aAAa,QAAQ,OAAQ,KAAK,UAAUM,CAAgB,CAAC,EAC7DjD,EAAK,YAAY,YAAciD,EAAiB,OAChD,aAAa,QAAQ,YAAa,OAAOA,EAAiB,MAAM,CAAC,CACnE,EAGaF,EAAiB,GAAK,CACjC,MAAMC,EAAY,EAAE,cACpB,IAAIE,EAAuBjC,EAAQ,UAAU,EACxCiC,EAAqB,SAASZ,CAAgB,IACjDY,EAAqB,KAAKZ,CAAgB,EAC1CU,EAAU,YAAc,uBACxBA,EAAU,UAAU,IAAI,aAAa,EACrCA,EAAU,oBAAoB,QAASD,CAAc,EACrDC,EAAU,iBAAiB,QAASF,CAAqB,GAE3D9C,EAAK,YAAY,YAAckD,EAAqB,OACpD,aAAa,QAAQ,WAAY,KAAK,UAAUA,CAAoB,CAAC,EACrE,aAAa,QAAQ,gBAAiB,OAAOA,EAAqB,MAAM,CAAC,CAC3E,EAGaP,EAAwB,GAAK,CACxC,MAAMK,EAAY,EAAE,cACpB,IAAIC,EAAmBhC,EAAQ,MAAM,EACrC,GAAIgC,EAAiB,SAASX,CAAgB,EAAG,CAC/C,MAAMa,EAAUF,EAAiB,QAAQX,CAAgB,EACzDW,EAAiB,OAAOE,EAAS,CAAC,EAClCH,EAAU,YAAc,cACxBA,EAAU,UAAU,OAAO,SAAS,EACpCA,EAAU,oBAAoB,QAASL,CAAqB,EAC5DK,EAAU,iBAAiB,QAASJ,CAAc,CACnD,CACD,aAAa,QAAQ,OAAQ,KAAK,UAAUK,CAAgB,CAAC,EAC7DjD,EAAK,YAAY,YAAciD,EAAiB,OAChD,aAAa,QAAQ,YAAa,OAAOA,EAAiB,MAAM,CAAC,CACnE,EAEaH,EAAwB,GAAK,CACxC,MAAME,EAAY,EAAE,cACpB,IAAIE,EAAuBjC,EAAQ,UAAU,EAC7C,GAAIiC,EAAqB,SAASZ,CAAgB,EAAG,CACnD,MAAMa,EAAUD,EAAqB,QAAQZ,CAAgB,EAC7DY,EAAqB,OAAOC,EAAS,CAAC,EACtCH,EAAU,YAAc,kBACxBA,EAAU,UAAU,OAAO,aAAa,EACxCA,EAAU,oBAAoB,QAASF,CAAqB,EAC5DE,EAAU,iBAAiB,QAASD,CAAc,CACnD,CACD,aAAa,QAAQ,WAAY,KAAK,UAAUG,CAAoB,CAAC,EACrElD,EAAK,YAAY,YAAckD,EAAqB,OACpD,aAAa,QAAQ,gBAAiB,OAAOA,EAAqB,MAAM,CAAC,CAC3E,EAGO,IAAIE,EACC,MAACC,EAAe,MAAM,GAAK,CACrC,EAAE,eAAc,EAChBD,EAAcpD,EAAK,UAAU,MAAM,KAAI,EACvC,MAAM6B,EAAW,MAAMyB,EAAiBF,CAAW,EAC/CvB,EAAS,SAAW,GACtBT,EAAS,KAAK,CACZ,QAAS,8BACT,QAAS,IACT,SAAU,YACV,MAAO,QACb,CAAK,EAEH,MAAMmC,EAAuBhD,EAAesB,CAAQ,EACpD7B,EAAK,aAAa,UAAYuD,CAChC,EAEaC,EAAa,GAAK,CAC7B,MAAM/B,EAAa,aAAa,QAAQ,OAAO,EAE1CA,GACH,aAAa,QAAQ,QAAS,OAAO,EAEnCA,IAAe,SACjB,SAAS,KAAK,aAAa,aAAc,MAAM,EAC/C,aAAa,QAAQ,QAAS,MAAM,IAEpC,SAAS,KAAK,gBAAgB,YAAY,EAC1C,aAAa,QAAQ,QAAS,OAAO,EAEzC,EAEagC,EAAS,SAAY,CAChC,IAAIlC,EAAYN,EAAQ,MAAM,EAE9B,GADK,MAAM,QAAQM,CAAS,IAAGA,EAAY,CAAA,GACvCA,EAAU,SAAW,EAAG,CAC1BH,EAAS,KAAK,CACZ,QAAS,gBACT,QAAS,IACT,SAAU,YACV,MAAO,QACb,CAAK,EACD,MACD,CACDG,EAAYA,EAAU,IAAImC,GAAM,OAAOA,CAAE,CAAC,EAAE,OAAOC,GAAK,OAAO,SAASA,CAAC,CAAC,EAC1E,IAAIC,EAAe,CAAA,EACnB,QAASC,EAAI,EAAGA,EAAItC,EAAU,OAAQsC,IACpCD,EAAa,KAAKnB,EAAelB,EAAUsC,CAAC,CAAC,CAAC,EAEhDD,EAAe,MAAM,QAAQ,WAAWA,CAAY,EACpD,MAAME,EAAmB,CAAA,EACzB,QAASD,EAAI,EAAGA,EAAID,EAAa,OAAQC,IAAK,CAC5C,MAAME,EAAMH,EAAaC,CAAC,EACtBE,EAAI,SAAW,YACjBD,EAAiB,KAAKC,EAAI,KAAK,EAE/B3C,EAAS,QAAQ,CACf,QAAS,yBACT,QAAS,IACT,SAAU,YACV,MAAO,KACf,CAAO,CAEJ,CACD,GAAI0C,EAAiB,SAAW,EAAG,CACjC1C,EAAS,KAAK,CACZ,QAAS,gBACT,QAAS,IACT,SAAU,YACV,MAAO,QACb,CAAK,EACD,MACD,CACD,MAAM4C,EAAazD,EAAeuD,CAAgB,EAClD9D,EAAK,aAAa,UAAYgE,CAChC,EAEaC,EAAS,SAAY,CAChC,IAAIzC,EAAYP,EAAQ,UAAU,EAElC,GADK,MAAM,QAAQO,CAAS,IAAGA,EAAY,CAAA,GACvCA,EAAU,SAAW,EAAG,CAC1BJ,EAAS,KAAK,CACZ,QAAS,qBACT,QAAS,IACT,SAAU,YACV,MAAO,QACb,CAAK,EACD,MACD,CAEDI,EAAYA,EAAU,IAAIkC,GAAM,OAAOA,CAAE,CAAC,EAAE,OAAOC,GAAK,OAAO,SAASA,CAAC,CAAC,EAC1E,IAAIO,EAAe,CAAA,EACnB,QAASL,EAAI,EAAGA,EAAIrC,EAAU,OAAQqC,IACpCK,EAAa,KAAKzB,EAAejB,EAAUqC,CAAC,CAAC,CAAC,EAEhDK,EAAe,MAAM,QAAQ,WAAWA,CAAY,EACpD,MAAMJ,EAAmB,CAAA,EACzB,QAASD,EAAI,EAAGA,EAAIK,EAAa,OAAQL,IAAK,CAC5C,MAAME,EAAMG,EAAaL,CAAC,EACtBE,EAAI,SAAW,YACjBD,EAAiB,KAAKC,EAAI,KAAK,EAE/B3C,EAAS,QAAQ,CACf,QAAS,yBACT,QAAS,IACT,SAAU,YACV,MAAO,KACf,CAAO,CAEJ,CACD,GAAI0C,EAAiB,SAAW,EAAG,CACjC1C,EAAS,KAAK,CACZ,QAAS,qBACT,QAAS,IACT,SAAU,YACV,MAAO,QACb,CAAK,EACD,MACD,CACD,MAAM4C,EAAazD,EAAeuD,CAAgB,EAClD9D,EAAK,aAAa,UAAYgE,CAChC,EClUAG,EAAM,SAAS,QAAUlE,EAElB,eAAeyB,GAAgB,CACpC,GAAI,CAGF,OAFiB,MAAMyC,EAAM,IAAI,GAAGjE,EAAS,UAAU,EAAE,GACnC,IAEvB,OAAQkC,EAAO,CACd,MAAMA,CACP,CACH,CAEO,IAAIgC,EAEJ,eAAejC,GAAwB,CAC5C,IAAIkC,EAAS,IAAI,gBAAgB,CAC/B,MAAOlE,EACP,MAAOkB,EAAc,GAAKlB,CAC9B,CAAG,EACD,GAAI,CAIF,MAAME,GAHW,MAAM8D,EAAM,IAAI,GAAGjE,EAAS,QAAQ,GAAGgC,CAAY,GAAI,CACtE,OAAAmC,CACN,CAAK,GACqB,KACtB,OAAAD,EAAa,KAAK,KAAK/D,EAAK,MAAQF,CAAK,EACzCmE,IACOjE,EAAK,QACb,OAAQ+B,EAAO,CACd,MAAMA,CACP,CACH,CAEO,eAAeN,GAAc,CAClC,IAAIuC,EAAS,IAAI,gBAAgB,CAC/B,MAAOlE,EACP,MAAOkB,EAAc,GAAKlB,CAC9B,CAAG,EACD,GAAI,CAEF,MAAME,GADW,MAAM8D,EAAM,IAAI,GAAGjE,EAAS,QAAQ,GAAI,CAAE,OAAAmE,CAAM,CAAE,GAC7C,KACtB,OAAAD,EAAa,KAAK,KAAK/D,EAAK,MAAQF,CAAK,EACzCmE,IACOjE,EAAK,QACb,OAAQ+B,EAAO,CACd,MAAMA,CACP,CACH,CAEY,MAACK,EAAiB,MAAM1B,GAAa,CAC/C,GAAI,CAGF,OAFiB,MAAMoD,EAAM,IAAI,GAAGjE,EAAS,EAAE,GAAGa,CAAS,EAAE,GACvC,IAEvB,OAAQqB,EAAO,CACd,MAAMA,CACP,CACH,EAEakB,EAAmB,MAAMF,GAAe,CACnD,IAAIiB,EAAS,IAAI,gBAAgB,CAC/B,MAAOlE,EACP,MAAOkB,EAAc,GAAKlB,CAC9B,CAAG,EACD,GAAI,CAIF,MAAME,GAHW,MAAM8D,EAAM,IAAI,GAAGjE,EAAS,IAAI,GAAGkD,CAAW,GAAI,CACjE,OAAAiB,CACN,CAAK,GACqB,KACtB,OAAAD,EAAa,KAAK,KAAK/D,EAAK,MAAQF,CAAK,EACzCmE,IACOjE,EAAK,QACb,OAAQ+B,EAAO,CACd,MAAMA,CACP,CACH,EC3EO,IAAIF,EAAe,MACnB,MAAMN,EAAiB,IAAM,CAClC,MAAM2C,EAAW,SAAS,cAAc,kBAAkB,EACtDA,IACFA,EAAS,UAAU,IAAI,yBAAyB,EAChDrC,EAAeqC,EAAS,YAE5B,EAEatC,EAAY,GAAK,CAC5B,MAAMe,EAAY,EAAE,OAAO,QAAQ,kBAAkB,EACrD,GAAI,CAACA,EAAW,OAEhB,MAAMwB,EAAoB,SAAS,cAAc,0BAA0B,EACvEA,GACFA,EAAkB,UAAU,OAAO,yBAAyB,EAE9DxB,EAAU,UAAU,IAAI,yBAAyB,EACjDd,EAAec,EAAU,WAE3B,EAEasB,EAAmB,IAAM,CAChCF,EAAa/C,EACfrB,EAAK,aAAa,UAAU,OAAO,WAAW,GAE9CA,EAAK,aAAa,UAAU,IAAI,WAAW,EAC3CoB,EAAS,KAAK,CACZ,QAAS,8BACT,QAAS,IACT,SAAU,YACV,MAAO,QACb,CAAK,EAEL,EAEaH,EAAUwD,GAAO,CAC5B,IAAIC,EAAQ,aAAa,QAAQD,CAAG,EACpC,GAAIC,IAAU,MAAQA,IAAU,GAC9B,oBAAa,QAAQD,EAAK,IAAI,EACvB,GAEP,GAAI,CAEF,OADAC,EAAQ,KAAK,MAAM,aAAa,QAAQD,CAAG,CAAC,EACxC,MAAM,QAAQC,CAAK,EACdA,EAEA,EAEV,MAAe,CACd,oBAAa,QAAQD,EAAK,IAAI,EACvB,EACR,CAEL,EAEaE,EAAgBjB,GAAM,CACjC,MAAM1C,EAAOC,EAAQ,MAAM,EACtBD,EAAK,SAAS,OAAO0C,CAAE,CAAC,IAC3B1C,EAAK,KAAK,OAAO0C,CAAE,CAAC,EACpB,aAAa,QAAQ,OAAQ,KAAK,UAAU1C,CAAI,CAAC,EAErD,EAEa4D,EAAyBlB,GAAM,CAE1C,MAAMmB,EADW5D,EAAQ,UAAU,EACV,OAAO6D,GAAU,OAAOA,CAAM,IAAM,OAAOpB,CAAE,CAAC,EACvE,aAAa,QAAQ,WAAY,KAAK,UAAUmB,CAAO,CAAC,CAC1D"}