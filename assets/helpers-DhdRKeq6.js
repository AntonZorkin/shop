import{a as m}from"./vendor-N5iQpiFS.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const c of r)if(c.type==="childList")for(const n of c.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&a(n)}).observe(document,{childList:!0,subtree:!0});function o(r){const c={};return r.integrity&&(c.integrity=r.integrity),r.referrerPolicy&&(c.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?c.credentials="include":r.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function a(r){if(r.ep)return;r.ep=!0;const c=o(r);fetch(r.href,c)}})();const s={categoriesElem:document.querySelector(".categories"),productsElem:document.querySelector(".products"),categoryElem:document.querySelector(".categories__item"),loadMoreElem:document.querySelector(".load-more-btn"),searchBtnElem:document.querySelector(".search-form"),modalElem:document.querySelector(".modal-product"),modalRoot:document.querySelector(".modal"),modalCloseElem:document.querySelector(".modal__close-btn"),formElem:document.querySelector(".search-form"),inputElem:document.querySelector(".search-form__input"),productIdElem:document.querySelector(".js-product-id"),themeElem:document.querySelector(".theme-toggle-btn"),cartNumElem:document.querySelector(".js-cart-count"),wishNumElem:document.querySelector(".js-wish-count"),cartProducts:document.querySelector(".js-cart-products"),wishProducts:document.querySelector(".js-wish-products")},k="https://dummyjson.com/",h={CATEGORIES:"products/category-list",PRODUCTS:"products?",CATEGORY:"products/category/",ID:"products/",NAME:"products/search?q="},i=12,M=e=>e.map(t=>`<li class="categories__item">
   <button class="categories__btn" type="button">${t}</button>
 </li>`).join(""),g=e=>e.map(t=>`
  <li class="products__item" data-id="${t.id}">
    <img class="products__image" src="${t.thumbnail}" alt="${t.description}"/>
    <p class="products__title">${t.title}</p>
    <p class="products__brand"><span class="products__brand--bold">Brand:${t.brand}</span></p>
    <p class="products__category">Category: ${t.category}</p>
    <p class="products__price">Price: ${t.price}$</p>
  </li>`).join(""),A=e=>{var t;return`<img class="modal-product__img" src="${((t=e.images)==null?void 0:t[0])??e.thumbnail}" alt="${e.title||"Product image"}" />
      <div class="modal-product__content">
        <p class="modal-product__title">${e.title}</p>
        <ul class="modal-product__tags">${e.tags}</ul>
        <p class="modal-product__description">${e.description}</p>
        <p class="invisible js-product-id">${e.id}</p>
        <p class="modal-product__shipping-information">Shipping: ${e.shippingInformation}</p>
        <p class="modal-product__return-policy">Return Policy: ${e.returnPolicy}</p>
        <p class="modal-product__price">Price: ${e.price}$</p>
        <button class="modal-product__buy-btn" type="button">Buy</button>
      </div>`};function $(){s.modalRoot.classList.add("modal--is-open"),document.addEventListener("keydown",L),s.modalRoot.addEventListener("click",b)}const I=()=>{s.modalRoot.classList.remove("modal--is-open"),document.removeEventListener("keydown",L),s.modalRoot.removeEventListener("click",b)};function L(e){s.modalRoot.classList.contains("modal--is-open")&&e.key==="Escape"&&I()}const b=e=>{e.target===e.currentTarget&&I()};let p=1;const j=async()=>{let e=localStorage.getItem("cart");e===null||e===""?(localStorage.setItem("cart","[]"),localStorage.setItem("cartCount","0"),s.cartNumElem.textContent=0):(localStorage.setItem("cartCount",JSON.parse(localStorage.getItem("cart")).length),s.cartNumElem.textContent=localStorage.getItem("cartCount"));let t=localStorage.getItem("wishlist");t===null||t===""?(localStorage.setItem("wishlist","[]"),localStorage.setItem("wishlistCount","0"),s.wishNumElem.textContent=0):(localStorage.setItem("wishlistCount",JSON.parse(localStorage.getItem("wishlist")).length),s.wishNumElem.textContent=localStorage.getItem("wishlistCount"));let o=localStorage.getItem("theme");o||(localStorage.setItem("theme","light"),o="light"),o==="dark"?document.body.setAttribute("data-theme","dark"):document.body.removeAttribute("data-theme");const a=await x(),r=M(["All",...a]);s.categoriesElem.innerHTML=r,O();const c=await w(),n=g(c);s.productsElem.innerHTML=n},W=async e=>{T(e),p=1;try{const t=u==="All"?await w():await P();s.productsElem.innerHTML=g(t)}catch(t){throw t}},H=async e=>{p+=1;try{let t;u&&u!=="All"?t=await P():t=await w();const o=g(t);s.productsElem.insertAdjacentHTML("beforeend",o)}catch(t){throw t}};let l;const D=async e=>{const t=e.target.closest(".products__item");if(t)try{const o=Number(t.dataset.id),a=await _(o);s.modalElem.innerHTML=A(a),$();const r=s.modalRoot.querySelector(".js-cart-btn");l=String(a.id),d("cart").includes(l)?(r.textContent="Remove from cart",r.classList.add("in-cart"),r.addEventListener("click",S)):(r.textContent="Add to cart",r.addEventListener("click",f));const n=s.modalRoot.querySelector(".js-wish-btn");d("wishlist").includes(l)?(n.textContent="Remove from Wishlist",n.classList.add("in-wish"),n.addEventListener("click",E)):(n.textContent="Add to Wishlist",n.addEventListener("click",y))}catch(o){throw o}},f=e=>{const t=e.currentTarget;let o=d("cart");o.includes(l)||(o.push(l),t.textContent="Remove from cart",t.classList.add("in-cart"),t.removeEventListener("click",f),t.addEventListener("click",S)),localStorage.setItem("cart",JSON.stringify(o)),s.cartNumElem.textContent=o.length,localStorage.setItem("cartCount",String(o.length))},y=e=>{const t=e.currentTarget;let o=d("wishlist");o.includes(l)||(o.push(l),t.textContent="Remove from Wishlist",t.classList.add("in-wishlist"),t.removeEventListener("click",y),t.addEventListener("click",E)),s.wishNumElem.textContent=o.length,localStorage.setItem("wishlist",JSON.stringify(o)),localStorage.setItem("wishlistCount",String(o.length))},S=e=>{const t=e.currentTarget;let o=d("cart");if(o.includes(l)){const a=o.indexOf(l);o.splice(a,1),t.textContent="Add to cart",t.classList.remove("in-cart"),t.removeEventListener("click",S),t.addEventListener("click",f)}localStorage.setItem("cart",JSON.stringify(o)),s.cartNumElem.textContent=o.length,localStorage.setItem("cartCount",String(o.length))},E=e=>{const t=e.currentTarget;let o=d("wishlist");if(o.includes(l)){const a=o.indexOf(l);o.splice(a,1),t.textContent="Add to Wishlist",t.classList.remove("in-wishlist"),t.removeEventListener("click",E),t.addEventListener("click",y)}localStorage.setItem("wishlist",JSON.stringify(o)),s.wishNumElem.textContent=o.length,localStorage.setItem("wishlistCount",String(o.length))};let C;const F=async e=>{e.preventDefault(),C=s.inputElem.value.trim();const t=await R(C);t.length;const o=g(t);s.productsElem.innerHTML=o},J=e=>{const t=localStorage.getItem("theme");t||localStorage.setItem("theme","light"),t==="light"?(document.body.setAttribute("data-theme","dark"),localStorage.setItem("theme","dark")):(document.body.removeAttribute("data-theme"),localStorage.setItem("theme","light"))},U=async()=>{let e=d("cart");if(Array.isArray(e)||(e=[]),e.length===0){//!додати повідомлення «Cart is empty»
return}e=e.map(r=>Number(r)).filter(r=>Number.isFinite(r));let t=[];for(let r=0;r<e.length;r++)t.push(_(e[r]));t=await Promise.allSettled(t);const o=[];for(let r=0;r<t.length;r++){const c=t[r];c.status==="fulfilled"&&o.push(c.value)}if(o.length===0){//!додати повідомлення «Cart is empty»
return}const a=g(o);s.cartProducts.innerHTML=a},G=async()=>{let e=d("wishlist");if(Array.isArray(e)||(e=[]),e.length===0){//!додати повідомлення «Wishlist is empty»
return}e=e.map(r=>Number(r)).filter(r=>Number.isFinite(r));let t=[];for(let r=0;r<e.length;r++)t.push(_(e[r]));t=await Promise.allSettled(t);const o=[];for(let r=0;r<t.length;r++){const c=t[r];c.status==="fulfilled"&&o.push(c.value)}if(o.length===0){//!додати повідомлення «Cart is empty»
return}const a=g(o);s.wishProducts.innerHTML=a};m.defaults.baseURL=k;async function x(){try{return(await m.get(`${h.CATEGORIES}`)).data}catch(e){throw e}}let v;async function P(){let e=new URLSearchParams({limit:i,skip:(p-1)*i});try{const o=(await m.get(`${h.CATEGORY}${u}`,{params:e})).data;return v=Math.ceil(o.total/i),N(),o.products}catch(t){throw t}}async function w(){let e=new URLSearchParams({limit:i,skip:(p-1)*i});try{const o=(await m.get(`${h.PRODUCTS}`,{params:e})).data;return v=Math.ceil(o.total/i),N(),o.products}catch(t){throw t}}const _=async e=>{try{return(await m.get(`${h.ID}${e}`)).data}catch(t){throw t}},R=async e=>{let t=new URLSearchParams({limit:i,skip:(p-1)*i});try{return(await m.get(`${h.NAME}${e}`,{params:t})).data.products}catch(o){throw o}};let u="All";const O=()=>{const e=document.querySelector(".categories__btn");e&&(e.classList.add("categories__btn--active"),u=e.textContent)},T=e=>{const t=e.target.closest(".categories__btn");if(!t)return;const o=document.querySelector(".categories__btn--active");o&&o.classList.remove("categories__btn--active"),t.classList.add("categories__btn--active"),u=t.textContent},N=()=>{v>p?s.loadMoreElem.classList.remove("is-hidden"):s.loadMoreElem.classList.add("is-hidden")},d=e=>{let t=localStorage.getItem(e);if(t===null||t==="")return localStorage.setItem(e,"[]"),[];try{return t=JSON.parse(localStorage.getItem(e)),Array.isArray(t)?t:[]}catch{return localStorage.setItem(e,"[]"),[]}};export{W as a,H as b,d as c,D as d,I as e,F as f,J as g,U as h,j as i,_ as j,G as o,s as r};
//# sourceMappingURL=helpers-DhdRKeq6.js.map
