import"./assets/styles-lqBsz77e.js";import{a as n}from"./assets/vendor-N5iQpiFS.js";const r={categoriesElem:document.querySelector(".categories"),productsElem:document.querySelector(".products"),categoryElem:document.querySelector(".categories__item"),loadMoreElem:document.querySelector(".load-more-btn"),searchBtnElem:document.querySelector(".search-form"),wishBtnElem:document.querySelector(".js-wish-btn"),modalElem:document.querySelector(".modal-product"),modalRoot:document.querySelector(".modal"),modalCloseElem:document.querySelector(".modal__close-btn"),formElem:document.querySelector(".search-form"),inputElem:document.querySelector(".search-form__input"),productIdElem:document.querySelector(".js-product-id"),themeElem:document.querySelector(".theme-toggle-btn")},S=e=>e.map(t=>`<li class="categories__item">
   <button class="categories__btn" type="button">${t}</button>
 </li>`).join(""),m=e=>e.map(t=>`
  <li class="products__item" data-id="${t.id}">
    <img class="products__image" src="${t.thumbnail}" alt="${t.description}"/>
    <p class="products__title">${t.title}</p>
    <p class="products__brand"><span class="products__brand--bold">Brand:${t.brand}</span></p>
    <p class="products__category">Category: ${t.category}</p>
    <p class="products__price">Price: ${t.price}$</p>
  </li>`).join(""),L=e=>{var t;return`<img class="modal-product__img" src="${((t=e.images)==null?void 0:t[0])??e.thumbnail}" alt="${e.title||"Product image"}" />
      <div class="modal-product__content">
        <p class="modal-product__title">${e.title}</p>
        <ul class="modal-product__tags">${e.tags}</ul>
        <p class="modal-product__description">${e.description}</p>
        <p class="invisible js-product-id">${e.id}</p>
        <p class="modal-product__shipping-information">Shipping: ${e.shippingInformation}</p>
        <p class="modal-product__return-policy">Return Policy: ${e.returnPolicy}</p>
        <p class="modal-product__price">Price: ${e.price}$</p>
        <button class="modal-product__buy-btn" type="button">Buy</button>
      </div>`},w="https://dummyjson.com/",d={CATEGORIES:"products/category-list",PRODUCTS:"products?",CATEGORY:"products/category/",ID:"products/",NAME:"products/search?q="},c=12;let a="All";const v=()=>{const e=document.querySelector(".categories__btn");e&&(e.classList.add("categories__btn--active"),a=e.textContent)},$=e=>{const t=e.target.closest(".categories__btn");if(!t)return;const o=document.querySelector(".categories__btn--active");o&&o.classList.remove("categories__btn--active"),t.classList.add("categories__btn--active"),a=t.textContent},E=()=>{g>l?r.loadMoreElem.classList.remove("is-hidden"):r.loadMoreElem.classList.add("is-hidden")};n.defaults.baseURL=w;async function M(){try{return(await n.get(`${d.CATEGORIES}`)).data}catch(e){throw e}}let g;async function h(){let e=new URLSearchParams({limit:c,skip:(l-1)*c});try{const o=(await n.get(`${d.CATEGORY}${a}`,{params:e})).data;return g=Math.ceil(o.total/c),E(),o.products}catch(t){throw t}}async function y(){let e=new URLSearchParams({limit:c,skip:(l-1)*c});try{const o=(await n.get(`${d.PRODUCTS}`,{params:e})).data;return g=Math.ceil(o.total/c),E(),o.products}catch(t){throw t}}const C=async e=>{try{return(await n.get(`${d.ID}${e}`)).data}catch(t){throw t}},P=async e=>{let t=new URLSearchParams({limit:c,skip:(l-1)*c});try{return(await n.get(`${d.NAME}${e}`,{params:t})).data.products}catch(o){throw o}};function k(){r.modalRoot.classList.add("modal--is-open"),document.addEventListener("keydown",f)}const b=()=>{r.modalRoot.classList.remove("modal--is-open"),document.removeEventListener("keydown",f)};function f(e){r.modalRoot.classList.contains("modal--is-open")&&e.key==="Escape"&&b()}let l=1;const R=async()=>{const e=await M(),t=S(["All",...e]);r.categoriesElem.innerHTML=t,v();const o=await y(),i=m(o);r.productsElem.innerHTML=i},q=async e=>{$(e),l=1;try{const t=a==="All"?await y():await h();r.productsElem.innerHTML=m(t)}catch(t){throw t}},I=async e=>{l+=1;try{let t;a&&a!=="All"?t=await h():t=await y();const o=m(t);r.productsElem.insertAdjacentHTML("beforeend",o)}catch(t){throw t}};let u;const B=async e=>{const t=e.target.closest(".products__item");if(t)try{const o=Number(t.dataset.id),i=await C(o);r.modalElem.innerHTML=L(i),k();const s=r.modalRoot.querySelector(".js-cart-btn");//!!!!!!!!!!!!!!!
if(console.log(s),u=String(i.id),!s.dataset.bound){//!!!!!!!!!!!!!!!!!!!!!!!!!!!!
s.addEventListener("click",A),s.dataset.bound="1"}let p=JSON.parse(localStorage.getItem("cart"));p===null&&(p=[]),p.includes(u)?s.textContent="Remove from cart":s.textContent="Add to cart"}catch(o){throw o}};let _;const T=async e=>{e.preventDefault(),_=r.inputElem.value.trim();const t=await P(_);t.length;const o=m(t);r.productsElem.innerHTML=o},A=e=>{let t=JSON.parse(localStorage.getItem("cart"));t===null&&(t=[]),t.includes(u)||(t[t.length]=u,e.currentTarget.textContent="Remove from cart"),localStorage.setItem("cart",JSON.stringify(t))};R();r.categoriesElem.addEventListener("click",q);r.loadMoreElem.addEventListener("click",I);r.productsElem.addEventListener("click",B);r.modalCloseElem.addEventListener("click",b);r.formElem.addEventListener("submit",T);
//# sourceMappingURL=index.js.map
