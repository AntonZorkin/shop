import"./assets/styles-lqBsz77e.js";import{a as l}from"./assets/vendor-N5iQpiFS.js";const r={categoriesElem:document.querySelector(".categories"),productsElem:document.querySelector(".products"),categoryElem:document.querySelector(".categories__item"),loadMoreElem:document.querySelector(".load-more-btn"),searchBtnElem:document.querySelector(".search-form"),modalElem:document.querySelector(".modal-product"),modalRoot:document.querySelector(".modal"),modalCloseElem:document.querySelector(".modal__close-btn"),formElem:document.querySelector(".search-form"),inputElem:document.querySelector(".search-form__input"),productIdElem:document.querySelector(".js-product-id"),themeElem:document.querySelector(".theme-toggle-btn")},$=e=>e.map(t=>`<li class="categories__item">
   <button class="categories__btn" type="button">${t}</button>
 </li>`).join(""),p=e=>e.map(t=>`
  <li class="products__item" data-id="${t.id}">
    <img class="products__image" src="${t.thumbnail}" alt="${t.description}"/>
    <p class="products__title">${t.title}</p>
    <p class="products__brand"><span class="products__brand--bold">Brand:${t.brand}</span></p>
    <p class="products__category">Category: ${t.category}</p>
    <p class="products__price">Price: ${t.price}$</p>
  </li>`).join(""),P=e=>{var t;return`<img class="modal-product__img" src="${((t=e.images)==null?void 0:t[0])??e.thumbnail}" alt="${e.title||"Product image"}" />
      <div class="modal-product__content">
        <p class="modal-product__title">${e.title}</p>
        <ul class="modal-product__tags">${e.tags}</ul>
        <p class="modal-product__description">${e.description}</p>
        <p class="invisible js-product-id">${e.id}</p>
        <p class="modal-product__shipping-information">Shipping: ${e.shippingInformation}</p>
        <p class="modal-product__return-policy">Return Policy: ${e.returnPolicy}</p>
        <p class="modal-product__price">Price: ${e.price}$</p>
        <button class="modal-product__buy-btn" type="button">Buy</button>
      </div>`},R="https://dummyjson.com/",u={CATEGORIES:"products/category-list",PRODUCTS:"products?",CATEGORY:"products/category/",ID:"products/",NAME:"products/search?q="},a=12;let i="All";const M=()=>{const e=document.querySelector(".categories__btn");e&&(e.classList.add("categories__btn--active"),i=e.textContent)},B=e=>{const t=e.target.closest(".categories__btn");if(!t)return;const o=document.querySelector(".categories__btn--active");o&&o.classList.remove("categories__btn--active"),t.classList.add("categories__btn--active"),i=t.textContent},b=()=>{y>d?r.loadMoreElem.classList.remove("is-hidden"):r.loadMoreElem.classList.add("is-hidden")};l.defaults.baseURL=R;async function T(){try{return(await l.get(`${u.CATEGORIES}`)).data}catch(e){throw e}}let y;async function w(){let e=new URLSearchParams({limit:a,skip:(d-1)*a});try{const o=(await l.get(`${u.CATEGORY}${i}`,{params:e})).data;return y=Math.ceil(o.total/a),b(),o.products}catch(t){throw t}}async function E(){let e=new URLSearchParams({limit:a,skip:(d-1)*a});try{const o=(await l.get(`${u.PRODUCTS}`,{params:e})).data;return y=Math.ceil(o.total/a),b(),o.products}catch(t){throw t}}const A=async e=>{try{return(await l.get(`${u.ID}${e}`)).data}catch(t){throw t}},O=async e=>{let t=new URLSearchParams({limit:a,skip:(d-1)*a});try{return(await l.get(`${u.NAME}${e}`,{params:t})).data.products}catch(o){throw o}};function N(){r.modalRoot.classList.add("modal--is-open"),document.addEventListener("keydown",I),r.modalRoot.addEventListener("click",C)}const v=()=>{r.modalRoot.classList.remove("modal--is-open"),document.removeEventListener("keydown",I),r.modalRoot.removeEventListener("click",C)};function I(e){r.modalRoot.classList.contains("modal--is-open")&&e.key==="Escape"&&v()}const C=e=>{e.target===e.currentTarget&&v()};let d=1;const q=async()=>{const e=localStorage.getItem("theme");e||localStorage.setItem("theme","light"),e==="dark"?document.body.setAttribute("data-theme","dark"):document.body.removeAttribute("data-theme");const t=await T(),o=$(["All",...t]);r.categoriesElem.innerHTML=o,M();const c=await E(),n=p(c);r.productsElem.innerHTML=n},x=async e=>{B(e),d=1;try{const t=i==="All"?await E():await w();r.productsElem.innerHTML=p(t)}catch(t){throw t}},J=async e=>{d+=1;try{let t;i&&i!=="All"?t=await w():t=await E();const o=p(t);r.productsElem.insertAdjacentHTML("beforeend",o)}catch(t){throw t}};let s;const W=async e=>{const t=e.target.closest(".products__item");if(t)try{const o=Number(t.dataset.id),c=await A(o);r.modalElem.innerHTML=P(c),N();const n=r.modalRoot.querySelector(".js-cart-btn");//!!!!!!!!!!!!!!!
s=String(c.id);let g=JSON.parse(localStorage.getItem("cart"));g===null&&(g=[]),g.includes(s)?(n.textContent="Remove from cart",n.classList.add("in-cart"),n.addEventListener("click",S)):(n.textContent="Add to cart",n.addEventListener("click",_));const m=r.modalRoot.querySelector(".js-wish-btn");let h=JSON.parse(localStorage.getItem("wishlist"));h===null&&(h=[]),h.includes(s)?(m.textContent="Remove from Wishlist",m.classList.add("in-wish"),m.addEventListener("click",L)):(m.textContent="Add to Wishlist",m.addEventListener("click",f))}catch(o){throw o}},_=e=>{const t=e.currentTarget;let o=JSON.parse(localStorage.getItem("cart"));o===null&&(o=[]),o.includes(s)||(o.push(s),t.textContent="Remove from cart",t.classList.add("in-cart"),t.removeEventListener("click",_),t.addEventListener("click",S)),localStorage.setItem("cart",JSON.stringify(o))},f=e=>{const t=e.currentTarget;let o=JSON.parse(localStorage.getItem("wishlist"));o===null&&(o=[]),o.includes(s)||(o.push(s),t.textContent="Remove from Wishlist",t.classList.add("in-wishlist"),t.removeEventListener("click",f),t.addEventListener("click",L)),localStorage.setItem("wishlist",JSON.stringify(o))},S=e=>{const t=e.currentTarget;let o=JSON.parse(localStorage.getItem("cart"));if(o===null&&(o=[]),o.includes(s)){const c=o.indexOf(s);o.splice(c,1),t.textContent="Add to cart",t.classList.remove("in-cart"),t.removeEventListener("click",S),t.addEventListener("click",_)}localStorage.setItem("cart",JSON.stringify(o))},L=e=>{const t=e.currentTarget;let o=JSON.parse(localStorage.getItem("wishlist"));if(o===null&&(o=[]),o.includes(s)){const c=o.indexOf(s);o.splice(c,1),t.textContent="Add to Wishlist",t.classList.remove("in-wishlist"),t.removeEventListener("click",L),t.addEventListener("click",f)}localStorage.setItem("wishlist",JSON.stringify(o))};let k;const j=async e=>{e.preventDefault(),k=r.inputElem.value.trim();const t=await O(k);t.length;const o=p(t);r.productsElem.innerHTML=o},D=e=>{const t=localStorage.getItem("theme");t||localStorage.setItem("theme","light"),t==="light"?(document.body.setAttribute("data-theme","dark"),localStorage.setItem("theme","dark")):(document.body.removeAttribute("data-theme"),localStorage.setItem("theme","light"))};q();r.categoriesElem.addEventListener("click",x);r.loadMoreElem.addEventListener("click",J);r.productsElem.addEventListener("click",W);r.modalCloseElem.addEventListener("click",v);r.formElem.addEventListener("submit",j);r.themeElem.addEventListener("click",D);
//# sourceMappingURL=index.js.map
