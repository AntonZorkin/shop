{"version":3,"file":"cart.js","sources":["../src/cart.js"],"sourcesContent":["//Логіка сторінки Cart\nimport { checkLS, setTheme } from './js/storage';\nimport { refs } from './js/refs.js';\nimport { getProductById } from './js/products-api.js';\nimport {\n  onCart,\n  onProductsClick,\n  onRemoveFromCartClick,\n  onThemeBtn,\n} from './js/handlers.js';\nimport { closeModal, onBuyBtnClick } from './js/modal.js';\n\nsetTheme();\nrefs.themeElem.addEventListener('click', onThemeBtn);\nonCart();\nconst savedCart = checkLS('cart');\nrefs.cartNumElem.textContent = savedCart.length;\ndocument.querySelector('.js-cart-number').textContent = savedCart.length;\nconst savedWish = checkLS('wishlist');\nrefs.wishNumElem.textContent = savedWish.length;\n\nconst collectPrices = async savedCart => {\n  let prices = [];\n  for (let i = 0; i < savedCart.length; i++) {\n    const data = await getProductById(savedCart[i]);\n    prices.push(data.price);\n  }\n  return prices;\n};\n\nlet totalPrice;\nconst initCartBage = async () => {\n  const prices = await collectPrices(checkLS('cart'));\n  totalPrice = prices.reduce((sum, e) => {\n    return sum + e;\n  }, 0);\n  document.querySelector('.js-cart-price').textContent = `$${totalPrice.toFixed(\n    2\n  )}`;\n};\ninitCartBage();\nrefs.productsElem.addEventListener('click', onProductsClick);\nrefs.modalCloseElem.addEventListener('click', closeModal);\n\nrefs.modalRoot.addEventListener('click', e => {\n  const cartBtn = e.target.closest('.js-cart-btn');\n  if (cartBtn === null) return;\n  onRemoveFromCartClick({ currentTarget: cartBtn });\n  closeModal();\n  onCart();\n  initCartBage();\n  const savedCart = checkLS('cart');\n  refs.cartNumElem.textContent = savedCart.length;\n  document.querySelector('.js-cart-number').textContent = savedCart.length;\n});\n\nrefs.modalRoot.addEventListener('click', e => {\n  const buyBtn = e.target.closest('.js-buy-btn');\n  if (buyBtn === null) return;\n  onBuyBtnClick();\n  onCart();\n  initCartBage();\n  const savedCart = checkLS('cart');\n  refs.cartNumElem.textContent = savedCart.length;\n  document.querySelector('.js-cart-number').textContent = savedCart.length;\n});\n"],"names":["setTheme","refs","onThemeBtn","onCart","savedCart","checkLS","savedWish","collectPrices","prices","i","data","getProductById","totalPrice","initCartBage","sum","e","onProductsClick","closeModal","cartBtn","onRemoveFromCartClick","onBuyBtnClick"],"mappings":"gJAYAA,IACAC,EAAK,UAAU,iBAAiB,QAASC,CAAU,EACnDC,IACA,MAAMC,EAAYC,EAAQ,MAAM,EAChCJ,EAAK,YAAY,YAAcG,EAAU,OACzC,SAAS,cAAc,iBAAiB,EAAE,YAAcA,EAAU,OAClE,MAAME,EAAYD,EAAQ,UAAU,EACpCJ,EAAK,YAAY,YAAcK,EAAU,OAEzC,MAAMC,EAAgB,MAAMH,GAAa,CACvC,IAAII,EAAS,CAAA,EACb,QAASC,EAAI,EAAGA,EAAIL,EAAU,OAAQK,IAAK,CACzC,MAAMC,EAAO,MAAMC,EAAeP,EAAUK,CAAC,CAAC,EAC9CD,EAAO,KAAKE,EAAK,KAAK,CACvB,CACD,OAAOF,CACT,EAEA,IAAII,EACJ,MAAMC,EAAe,SAAY,CAE/BD,GADe,MAAML,EAAcF,EAAQ,MAAM,CAAC,GAC9B,OAAO,CAACS,EAAKC,IACxBD,EAAMC,EACZ,CAAC,EACJ,SAAS,cAAc,gBAAgB,EAAE,YAAc,IAAIH,EAAW,QACpE,CACD,CAAA,EACH,EACAC,IACAZ,EAAK,aAAa,iBAAiB,QAASe,CAAe,EAC3Df,EAAK,eAAe,iBAAiB,QAASgB,CAAU,EAExDhB,EAAK,UAAU,iBAAiB,QAASc,GAAK,CAC5C,MAAMG,EAAUH,EAAE,OAAO,QAAQ,cAAc,EAC/C,GAAIG,IAAY,KAAM,OACtBC,EAAsB,CAAE,cAAeD,CAAO,CAAE,EAChDD,IACAd,IACAU,IACA,MAAMT,EAAYC,EAAQ,MAAM,EAChCJ,EAAK,YAAY,YAAcG,EAAU,OACzC,SAAS,cAAc,iBAAiB,EAAE,YAAcA,EAAU,MACpE,CAAC,EAEDH,EAAK,UAAU,iBAAiB,QAASc,GAAK,CAE5C,GADeA,EAAE,OAAO,QAAQ,aAAa,IAC9B,KAAM,OACrBK,IACAjB,IACAU,IACA,MAAMT,EAAYC,EAAQ,MAAM,EAChCJ,EAAK,YAAY,YAAcG,EAAU,OACzC,SAAS,cAAc,iBAAiB,EAAE,YAAcA,EAAU,MACpE,CAAC"}